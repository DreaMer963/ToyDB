### 第三章：索引结构

索引结构的重要性：加速在一个或者多个属性上对特定值的查询。

------

**1. 索引结构基础**

- **稠密索引**：数据文件中的每个记录在索引文件中都设有一个索引项。**稀疏索引**：数据文件中只有一些记录在索引文件中表示出来。

- **主索引**：主索引能确定记录在数据文件的位置。 **辅助索引**：不能。

- **顺序文件**

  - 顺序文件是对关系中的元组按**主键**（primary key）进行排序而生成的文件。关系中的元组按照这个顺序分布在多个数据块中。

  - 稠密索引：如果记录是排好序的，我们就可以在记录上建立**稠密索引**，索引是**一系列的列存储块**：块中只存放**记录的键以及指向记录本身的指针**。稠密索引文件中的索引块保持键的顺序和文件中的排序顺序一致。

    ![顺序文件与稠密索引](C:\Users\96399\AppData\Roaming\Typora\typora-user-images\1566387614951.png)

    如上图可见，数据块中的每一个记录在索引文件中都有一个相对应的索引项。

  - **稀疏索引**：只为数据文件的每个存储块设一个键-指针对。比稠密索引节省了更多的存储空间。但是查找花费更多的时间

    ![顺序文件和稀疏索引](C:\Users\96399\AppData\Roaming\Typora\typora-user-images\1566388014696.png)
    
  - **多级索引** 
  
  - **辅助索引**: unclear.
  
    - 辅助索引中的间接: 为了减少键值在索引文件中出现很多次,可以在索引文件和数据文件之间建立一个桶.
  
  
  
  
  
  ------
  
   **2. B - 树**
  
  - **B-树**能自动地保持与数据文件大小相适应的索引层次
  - 对所使用的存储块空间进行管理, 使每个块的充满程度在**半满与全满之间**.
  - **B - 树的结构**
    - 对应每一个B - 树索引都有一个参数n, 它决定了B - 树 的所有存储块的布局. 每个存储块存放**n个查找键值和n+1个指针**, 
    - B - 树存储块中可以出现的东西
      - **叶结点**中的键是**数据文件中的键的拷贝**,这些键以排好序的形式. 从左到右分布在叶结点中.
      - **根节点** 中至少有两个指针被使用. 所有指针指向位于 B - 树 **下一层的存储块**.
      - 叶结点中**最后一个指针**指向它**右边的下一个叶结点存储块**, 其他指针中, 如果第i个指针被使用, 则指向具有第 i 键值的记录
      - 所有**被使用的键和指针**通常都存放在**数据块的开头位置**, 除了叶结点第(n+1)个指针是个例外.
  - **B - 树的查找**
    - 从根到叶递归查找.
    - 查询范围: 不仅对搜寻单个查找键的查询有用, 而且对查找键值在某个范围的查询也很有用.  比如 **where** 子句.
  - **B - 树的插入**
  - **B - 树的删除**
  
  
  
  ------
  
    

**3. 散列表**

**4.多维索引**

**5.多维数据的树结构**

- **多键索引** 
- **kd - 树**
- **四叉树**
- **R - 树**

